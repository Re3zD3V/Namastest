"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8444],{5598:(D,C,o)=>{o.r(C),o.d(C,{AddToCatalogModalPageModule:()=>t});var p=o(6895),O=o(4719),e=o(4123),_=o(5012),M=o(5916),h=o(6738);const g=[{path:"",component:M.t}];let A=(()=>{class c{}return c.\u0275fac=function(P){return new(P||c)},c.\u0275mod=h.oAB({type:c}),c.\u0275inj=h.cJS({imports:[_.Bz.forChild(g),_.Bz]}),c})(),t=(()=>{class c{}return c.\u0275fac=function(P){return new(P||c)},c.\u0275mod=h.oAB({type:c}),c.\u0275inj=h.cJS({imports:[p.ez,O.u5,e.Pc,A]}),c})()},5916:(D,C,o)=>{o.d(C,{t:()=>P});var p=o(5861),O=o(8897),e=o(6738),_=o(3071),M=o(5174),h=o(4911),g=o(4123),A=o(5012),t=o(3699),c=o(6895);function f(m,v){if(1&m){const a=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label",1),e.NdJ("click",function(){const Z=e.CHM(a).$implicit,x=e.oxw();return e.KtG(x.addToCatalog(Z))}),e._uU(2),e.qZA()()}if(2&m){const a=v.$implicit;e.xp6(2),e.hij(" ",a.title," ")}}let P=(()=>{class m{constructor(a,r,T,Z,x,N,U,L,b,y){this.userService=a,this.tokenDecode=r,this.catalogService=T,this.platform=Z,this.toastCtrl=x,this.alertCtrl=N,this.router=U,this.modalCtrl=L,this.navParams=b,this.castService=y,this.userService.getUser(this.tokenDecode.getId()).subscribe(E=>{this.userCatalogs=E.catalogs,this.testsSelected=b.get("value"),this.testsSelected.map(S=>y.jsonToTest(S))})}ngOnInit(){}addToCatalog(a){null==a.tests&&(a.tests=new Array),this.testsSelected.forEach(r=>{a.tests.push(r)}),this.catalogService.updateCatalog(a.id,a).subscribe(r=>{console.log(r),this.showSuccessNotification(a)},r=>{console.log(r),this.showFailureNotification()}),this.modalCtrl.dismiss()}showSuccessNotification(a){var r=this;return(0,p.Z)(function*(){r.platform.is("android")?(yield r.toastCtrl.create({header:"Ajout effectu\xe9!",message:`Les tests s\xe9lectionn\xe9s ont bien \xe9t\xe9 ajout\xe9s au catalogue : ${a.title}`,duration:3e3})).present():(yield r.alertCtrl.create({header:"Ajout effectu\xe9!",message:`Les tests s\xe9lectionn\xe9s ont bien \xe9t\xe9 ajout\xe9s au catalogue : ${a.title}`,buttons:[{text:"OK",handler:()=>{r.router.navigate([O.oy])}}]})).present()})()}showFailureNotification(){var a=this;return(0,p.Z)(function*(){(yield a.alertCtrl.create({header:"Une erreur est survenue sur le serveur",message:"Veuillez r\xe9essayer plus tard",buttons:["OK"]})).present()})()}}return m.\u0275fac=function(a){return new(a||m)(e.Y36(_.K),e.Y36(M.j),e.Y36(h.a),e.Y36(g.t4),e.Y36(g.yF),e.Y36(g.Br),e.Y36(A.F0),e.Y36(g.IN),e.Y36(g.X1),e.Y36(t.W))},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-add-to-catalog-modal"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"click"]],template:function(a,r){1&a&&(e.TgZ(0,"div")(1,"h1"),e._uU(2,"Vos catalogues de tests"),e.qZA(),e.YNc(3,f,3,1,"ion-item",0),e.qZA()),2&a&&(e.xp6(3),e.Q6J("ngForOf",r.userCatalogs))},dependencies:[c.sg,g.Ie,g.Q$],styles:["h1[_ngcontent-%COMP%]{margin:2em auto 1em;text-align:center}h1[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-item[_ngcontent-%COMP%], ion-button[_ngcontent-%COMP%]{margin-bottom:20px}ion-button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-around}ion-button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{flex:1}@media screen and (min-width: 768px){h1[_ngcontent-%COMP%]{margin:2em auto}form[_ngcontent-%COMP%]{width:65%;max-width:800px;border-radius:.5em;margin:2em auto;padding:10px 30px;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}}"]}),m})()},8444:(D,C,o)=>{o.r(C),o.d(C,{ListPageModule:()=>Y});var p=o(6895),O=o(4719),e=o(4123),_=o(5012),M=o(5861),h=o(8701),g=o(9372),A=o(5916),t=o(6738),c=o(2511),f=o(3071),P=o(5174),m=o(2468),v=o(6604),a=o(3482);function r(i,d){1&i&&(t.TgZ(0,"ion-button",1)(1,"span")(2,"span"),t._uU(3,"Importer"),t.qZA(),t._UZ(4,"ion-icon",15),t.qZA()())}function T(i,d){if(1&i){const n=t.EpF();t.TgZ(0,"ion-accordion-group")(1,"ion-accordion")(2,"ion-item",7)(3,"h2"),t._uU(4,"Options"),t.qZA(),t._UZ(5,"ion-label"),t.qZA(),t.TgZ(6,"ion-list",8)(7,"ion-button",9),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.openTestModal())}),t.TgZ(8,"span")(9,"span"),t._uU(10,"Nouveau test"),t.qZA(),t._UZ(11,"ion-icon",10),t.qZA()(),t.YNc(12,r,5,0,"ion-button",11),t.TgZ(13,"ion-button",9),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.setAddToCatalogModalOpen())}),t.TgZ(14,"span")(15,"span"),t._uU(16,"Ajouter \xe0"),t.qZA(),t._UZ(17,"ion-icon",12),t.qZA()(),t.TgZ(18,"ion-button",13),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.showConfirmAlert())}),t.TgZ(19,"span")(20,"span"),t._uU(21,"Supprimer"),t.qZA(),t._UZ(22,"ion-icon",14),t.qZA()()()()()}if(2&i){const n=t.oxw();t.xp6(12),t.Q6J("ngIf",!n.mobile)}}function Z(i,d){if(1&i){const n=t.EpF();t.TgZ(0,"div")(1,"h2"),t._uU(2,"Options"),t.qZA(),t.TgZ(3,"ion-button",9),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.openTestModal())}),t.TgZ(4,"span")(5,"span"),t._uU(6,"Nouveau test"),t.qZA(),t._UZ(7,"ion-icon",10),t.qZA()(),t.TgZ(8,"ion-button",1)(9,"span")(10,"span"),t._uU(11,"Importer"),t.qZA(),t._UZ(12,"ion-icon",15),t.qZA()(),t.TgZ(13,"ion-button",9),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.setAddToCatalogModalOpen())}),t.TgZ(14,"span")(15,"span"),t._uU(16,"Ajouter \xe0"),t.qZA(),t._UZ(17,"ion-icon",12),t.qZA()(),t.TgZ(18,"ion-button",13),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.showConfirmAlert())}),t.TgZ(19,"span")(20,"span"),t._uU(21,"Supprimer"),t.qZA(),t._UZ(22,"ion-icon",14),t.qZA()()()}}function x(i,d){if(1&i){const n=t.EpF();t.TgZ(0,"ion-item")(1,"ion-checkbox",16),t.NdJ("click",function(){const u=t.CHM(n).$implicit,I=t.oxw();return t.KtG(I.selectMultiple(u))}),t.qZA(),t.TgZ(2,"ion-label"),t._uU(3),t.qZA(),t.TgZ(4,"ion-button",17),t._UZ(5,"ion-icon",18),t.qZA(),t._UZ(6,"ion-reorder",19),t.qZA()}if(2&i){const n=d.$implicit;t.xp6(3),t.hij(" ",n.title," "),t.xp6(1),t.MGl("routerLink","/test/details/",n.id,"")}}const U=[{path:"",component:(()=>{class i{constructor(n,s,l,u,I,B,R,K){this.testService=n,this.router=s,this.loadingCtrl=l,this.userService=u,this.tokenDecode=I,this.modalCtrl=B,this.alertCtrl=R,this.dataService=K,this.currentPage=1,this.isNewTestModalOpen=!1,this.isAddToCatalogModalOpen=!1,this.notifierSubscription=this.dataService.testListNotifier.subscribe(F=>{this.getAllTests()}),this.mobileCheck(),this.modalAnimations=h.L.getModalAnimation()}reorderTests(n){n.detail.complete()}mobileCheck(){this.mobile=!(window.innerWidth>768)}onResize(n){this.mobileCheck()}ngOnInit(){this.getAllTests(),this.testsSelected=[]}ionViewWillEnter(){this.getAllTests()}getAllTests(n){var s=this;return(0,M.Z)(function*(){const l=yield s.loadingCtrl.create({message:"Loading..",spinner:"bubbles"});yield l.present(),s.userService.getUser(s.tokenDecode.getId()).subscribe(u=>{l.dismiss(),s.tests=u.tests},u=>{console.log(u),l.dismiss()})})()}loadMore(n){this.currentPage++,this.getAllTests(n)}selectMultiple(n){let s=this.testsSelected.indexOf(n);-1!==s?this.testsSelected.splice(s,1):this.testsSelected.push(n),console.log(this.testsSelected)}deleteTests(){for(let n=0;n<this.testsSelected.length;n++)this.testService.deleteTest(this.testsSelected[n].id).subscribe(()=>{n==this.testsSelected.length-1&&this.getAllTests()})}showConfirmAlert(){this.testsSelected.length>0&&this.alertCtrl.create({header:"!! Suppression !!",message:"Voulez-vous vraiment supprimer les tests s\xe9lectionn\xe9s?",buttons:[{text:"Confirmer",handler:()=>{this.deleteTests()}},{text:"Annuler"}]}).then(n=>{n.present()})}ngOnDestroy(){this.modalCtrl.dismiss()}openTestModal(){var n=this;return(0,M.Z)(function*(){yield(yield n.modalCtrl.create({component:g.a,cssClass:["namastest-modal","namastest-center-modal"],enterAnimation:n.modalAnimations.enterAnimation,leaveAnimation:n.modalAnimations.leaveAnimation})).present()})()}setAddToCatalogModalOpen(){this.testsSelected.length>0&&this.openAddToCatalogModal()}openAddToCatalogModal(){var n=this;return(0,M.Z)(function*(){return yield(yield n.modalCtrl.create({component:A.t,componentProps:{value:n.testsSelected}})).present()})()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(c.q),t.Y36(_.F0),t.Y36(e.HT),t.Y36(f.K),t.Y36(P.j),t.Y36(e.IN),t.Y36(e.Br),t.Y36(m.D))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-test-list"]],hostBindings:function(n,s){1&n&&t.NdJ("resize",function(u){return s.onResize(u)},!1,t.Jf7)},decls:18,vars:3,consts:[["placeholder","filtrer mes tests"],["size","medium","expand","block","color","primary"],["name","help-circle-outline"],[4,"ngIf"],[1,"ion-content-scroll-host"],["disabled","false",3,"ionItemReorder"],[4,"ngFor","ngForOf"],["slot","header"],["slot","content"],["size","medium","expand","block","color","primary",3,"click"],["name","add-circle-outline"],["size","medium","expand","block","color","primary",4,"ngIf"],["name","folder-open-outline"],["size","medium","expand","block","color","danger",3,"click"],["name","trash-outline"],["name","arrow-down-circle-outline"],[3,"click"],["slot","end",1,"eye",3,"routerLink"],["name","eye"],["slot","end"]],template:function(n,s){1&n&&(t._UZ(0,"app-header"),t.TgZ(1,"ion-content")(2,"div")(3,"h1"),t._uU(4,"Vos cas de test"),t.qZA(),t.TgZ(5,"nav"),t._UZ(6,"ion-searchbar",0),t.TgZ(7,"ion-button",1)(8,"span")(9,"span"),t._uU(10,"Aide"),t.qZA(),t._UZ(11,"ion-icon",2),t.qZA()(),t.YNc(12,T,23,1,"ion-accordion-group",3),t.YNc(13,Z,23,0,"div",3),t.qZA(),t.TgZ(14,"ion-virtual-scroll",4)(15,"ion-reorder-group",5),t.NdJ("ionItemReorder",function(u){return s.reorderTests(u)}),t.YNc(16,x,7,2,"ion-item",6),t.qZA()()()(),t._UZ(17,"app-footer-menu")),2&n&&(t.xp6(12),t.Q6J("ngIf",s.mobile),t.xp6(1),t.Q6J("ngIf",!s.mobile),t.xp6(3),t.Q6J("ngForOf",s.tests))},dependencies:[p.sg,p.O5,e.We,e.eh,e.YG,e.nz,e.W2,e.gu,e.Ie,e.Q$,e.q_,e.Nh,e.oz,e.VI,e.w,e.j9,e.YI,e.aJ,_.rH,v.i,a.G],styles:["ion-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:2em auto 1em}ion-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1em}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{margin-bottom:20px}ion-content[_ngcontent-%COMP%]   .eye[_ngcontent-%COMP%]{margin-top:1rem;font-size:medium;--background: transparent;--box-shadow: 0 ;color:#858585}ion-content[_ngcontent-%COMP%]   .button-native[_ngcontent-%COMP%]{--background: red}ion-content[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{width:100%;padding:2px}ion-content[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding-left:2em}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-around}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{flex:1}ion-content[_ngcontent-%COMP%]   ion-virtual-scroll[_ngcontent-%COMP%]{max-height:70vh;min-height:41vh;overflow-y:scroll}@media screen and (min-width: 768px){ion-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{padding:2rem}ion-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{display:flex;flex-wrap:wrap}ion-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:1em auto 2em;width:100%}ion-content[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{min-width:25%;margin-right:2rem}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}ion-content[_ngcontent-%COMP%]   ion-virtual-scroll[_ngcontent-%COMP%]{flex:1;padding-left:1rem;border-left:1px solid #dee2e6}ion-content[_ngcontent-%COMP%]   ion-accordion-header[_ngcontent-%COMP%]{width:100%}}"]}),i})()},{path:"add-to-catalog-modal",loadChildren:()=>Promise.resolve().then(o.bind(o,5598)).then(i=>i.AddToCatalogModalPageModule)}];let L=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[_.Bz.forChild(U),_.Bz]}),i})();var b=o(5071),y=o(5598),E=o(5721),S=o(677);let Y=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.ez,O.u5,e.Pc,L,b.CreatePageModule,y.AddToCatalogModalPageModule,E.h,S.O]}),i})()}}]);