"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3950],{3950:(H,p,i)=>{i.r(p),i.d(p,{ListPageModule:()=>w});var g=i(6895),u=i(4719),c=i(4123),l=i(5012),d=i(5861),h=i(7397),_=i(8701),f=i(2959),n=i(6738),P=i(354),C=i(7665),M=i(2468),v=i(3699),Z=i(3482),O=i(6604);function x(e,s){1&e&&(n.TgZ(0,"ion-button",1)(1,"span")(2,"span"),n._uU(3,"Importer"),n.qZA(),n._UZ(4,"ion-icon",15),n.qZA()())}function A(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"ion-accordion-group")(1,"ion-accordion")(2,"ion-item",8)(3,"h2"),n._uU(4,"Options"),n.qZA(),n._UZ(5,"ion-label"),n.qZA(),n.TgZ(6,"ion-list",9)(7,"ion-button",10),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.openNewCampaignModal())}),n.TgZ(8,"span")(9,"span"),n._uU(10,"Nouvelle campagne"),n.qZA(),n._UZ(11,"ion-icon",11),n.qZA()(),n.YNc(12,x,5,0,"ion-button",12),n.TgZ(13,"ion-button",13),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.showConfirmAlert())}),n.TgZ(14,"span")(15,"span"),n._uU(16,"Supprimer"),n.qZA(),n._UZ(17,"ion-icon",14),n.qZA()()()()()}if(2&e){const t=n.oxw();n.xp6(12),n.Q6J("ngIf",!t.mobile)}}function T(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"div")(1,"h2"),n._uU(2,"Options"),n.qZA(),n.TgZ(3,"ion-button",10),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.openNewCampaignModal())}),n.TgZ(4,"span")(5,"span"),n._uU(6,"Nouvelle campagne"),n.qZA(),n._UZ(7,"ion-icon",11),n.qZA()(),n.TgZ(8,"ion-button",1)(9,"span")(10,"span"),n._uU(11,"Importer"),n.qZA(),n._UZ(12,"ion-icon",15),n.qZA()(),n.TgZ(13,"ion-button",13),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.showConfirmAlert())}),n.TgZ(14,"span")(15,"span"),n._uU(16,"Supprimer"),n.qZA(),n._UZ(17,"ion-icon",14),n.qZA()()()}}function b(e,s){1&e&&n.GkF(0)}function j(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"ion-item",17)(1,"ion-checkbox",18),n.NdJ("click",function(){const r=n.CHM(t).$implicit,m=n.oxw(2);return n.KtG(m.selectMultiple(r))}),n.qZA(),n.TgZ(2,"ion-label"),n._uU(3),n.qZA(),n.TgZ(4,"span",19),n._UZ(5,"ion-icon",20),n.qZA()()}if(2&e){const t=s.$implicit,o=n.oxw(2);n.hYB("routerLink","/project/details/",o.project.id,"/campaign/details/",t.id,""),n.xp6(3),n.hij(" ",t.title," ")}}function L(e,s){if(1&e&&n.YNc(0,j,6,3,"ion-item",16),2&e){const t=n.oxw();n.Q6J("ngForOf",t.project.campaigns)}}function y(e,s){1&e&&(n.TgZ(0,"h2"),n._uU(1,"Vous n'avez aucune campagne :("),n.qZA())}const U=[{path:"",component:(()=>{class e{constructor(t,o,a,r,m,z,J,B,k,F){this.router=t,this.activatedRoute=o,this.projectService=a,this.campaignService=r,this.loadingCtrl=m,this.modalCtrl=z,this.alertCtrl=J,this.dataService=B,this.castModelService=k,this.animationCtrl=F,this.currentPage=1,this.isNewCampaignModalOpen=!1,this.notifierSubscription=this.dataService.campaignListNotifier.subscribe(q=>{this.getProject()}),this.mobileCheck(),this.project=new h.I,this.project.id=this.activatedRoute.snapshot.params.id,this.modalAnimations=new _.L}reorderCampaigns(t){t.detail.complete()}mobileCheck(){this.mobile=!(window.innerWidth>768)}onResize(t){this.mobileCheck()}ngOnInit(){this.getProject(),this.campaignsSelected=[]}ionViewWillEnter(){this.getProject()}getProject(t){var o=this;return(0,d.Z)(function*(){const a=yield o.loadingCtrl.create({message:"Loading..",spinner:"bubbles"});yield a.present(),o.projectService.getProjectById(o.project).subscribe(r=>{o.project=o.castModelService.jsonToProject(r),console.log(o.project)}).add(()=>{a.dismiss()})})()}loadMore(t){this.currentPage++,this.getProject(t)}selectMultiple(t){let o=this.campaignsSelected.indexOf(t);-1!==o?this.campaignsSelected.splice(o,1):this.campaignsSelected.push(t),console.log(this.campaignsSelected)}deleteCampaigns(){for(let t=0;t<this.campaignsSelected.length;t++)this.campaignService.deleteCampaignById(this.campaignsSelected[t].id).subscribe(()=>{t==this.campaignsSelected.length-1&&this.getProject()})}showConfirmAlert(){this.campaignsSelected.length>0&&this.alertCtrl.create({header:"!! Suppression !!",message:"Voulez-vous vraiment supprimer les campagnes s\xe9lectionn\xe9es?",buttons:[{text:"Confirmer",handler:()=>{this.deleteCampaigns()}},{text:"Annuler"}]}).then(t=>{t.present()})}ngOnDestroy(){this.modalCtrl.dismiss()}openNewCampaignModal(){var t=this;return(0,d.Z)(function*(){yield(yield t.modalCtrl.create({component:f.q,cssClass:"namastest-modal",enterAnimation:t.modalAnimations.enterAnimation,leaveAnimation:t.modalAnimations.leaveAnimation,componentProps:{project:t.project}})).present()})()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(l.F0),n.Y36(l.gz),n.Y36(P.Y),n.Y36(C.U),n.Y36(c.HT),n.Y36(c.IN),n.Y36(c.Br),n.Y36(M.D),n.Y36(v.W),n.Y36(c.vB))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-list"]],hostBindings:function(t,o){1&t&&n.NdJ("resize",function(r){return o.onResize(r)},!1,n.Jf7)},decls:21,vars:5,consts:[["placeholder","filtrer mes campagnes"],["size","medium","expand","block","color","primary"],["name","help-circle-outline"],[4,"ngIf"],[1,"ion-content-scroll-host"],[4,"ngIf","ngIfThen","ngIfElse"],["hasCampaigns",""],["noCampaigns",""],["slot","header"],["slot","content"],["size","medium","expand","block","color","primary",3,"click"],["name","add-circle-outline"],["size","medium","expand","block","color","primary",4,"ngIf"],["size","medium","expand","block","color","danger",3,"click"],["name","trash-outline"],["name","arrow-down-circle-outline"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[3,"click"],["color","secondary",1,"d-flex","align-items-center"],["name","eye-outline"]],template:function(t,o){if(1&t&&(n._UZ(0,"app-header"),n.TgZ(1,"ion-content")(2,"div")(3,"h1"),n._uU(4,"Les campagnes du projet"),n.qZA(),n.TgZ(5,"nav"),n._UZ(6,"ion-searchbar",0),n.TgZ(7,"ion-button",1)(8,"span")(9,"span"),n._uU(10,"Aide"),n.qZA(),n._UZ(11,"ion-icon",2),n.qZA()(),n.YNc(12,A,18,1,"ion-accordion-group",3),n.YNc(13,T,18,0,"div",3),n.qZA(),n.TgZ(14,"ion-virtual-scroll",4),n.YNc(15,b,1,0,"ng-container",5),n.qZA()(),n.YNc(16,L,1,1,"ng-template",null,6,n.W1O),n.YNc(18,y,2,0,"ng-template",null,7,n.W1O),n.qZA(),n._UZ(20,"app-footer-menu")),2&t){const a=n.MAs(17),r=n.MAs(19);n.xp6(12),n.Q6J("ngIf",o.mobile),n.xp6(1),n.Q6J("ngIf",!o.mobile),n.xp6(2),n.Q6J("ngIf",o.project&&o.project.campaigns&&o.project.campaigns.length>0)("ngIfThen",a)("ngIfElse",r)}},dependencies:[g.sg,g.O5,c.We,c.eh,c.YG,c.nz,c.W2,c.gu,c.Ie,c.Q$,c.q_,c.VI,c.w,c.j9,c.YI,c.aJ,l.rH,Z.G,O.i],styles:["ion-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--ion-color-primary);text-align:center}ion-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:2em auto 1em}ion-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1em}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{margin-bottom:20px}ion-content[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{width:100%;padding:2px}ion-content[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding-left:2em}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-around}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{flex:1}ion-content[_ngcontent-%COMP%]   ion-virtual-scroll[_ngcontent-%COMP%]{max-height:70vh;min-height:41vh;overflow-y:scroll}@media screen and (min-width: 768px){ion-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{padding:2rem}ion-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{display:flex;flex-wrap:wrap}ion-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:1em auto 2em;width:100%}ion-content[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{min-width:25%;margin-right:2rem}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}ion-content[_ngcontent-%COMP%]   ion-virtual-scroll[_ngcontent-%COMP%]{flex:1;padding-left:1rem;border-left:1px solid #dee2e6}ion-content[_ngcontent-%COMP%]   ion-accordion-header[_ngcontent-%COMP%]{width:100%}}"]}),e})()}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[l.Bz.forChild(U),l.Bz]}),e})();var I=i(7039),N=i(5721),Y=i(677);let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[g.ez,u.u5,c.Pc,S,I.CreateCampaignPageModule,Y.O,N.h]}),e})()}}]);