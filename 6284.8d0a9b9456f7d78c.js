"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6284],{6284:(D,M,s)=>{s.r(M),s.d(M,{DetailPageModule:()=>y});var _=s(6895),e=s(4719),o=s(4123),d=s(5012),m=s(5861),h=s(212),T=s(9372),f=s(1902),v=s(8701),t=s(6738),r=s(4911),g=s(2468);function i(a,u){1&a&&(t.TgZ(0,"ion-content",10),t._uU(1,"Mise \xe0 jour r\xe9ussie"),t.qZA())}function c(a,u){if(1&a){const n=t.EpF();t.TgZ(0,"ion-item")(1,"ion-checkbox",7),t.NdJ("click",function(){const C=t.CHM(n).$implicit,b=t.oxw();return t.KtG(b.selectMultiple(C))}),t.qZA(),t.TgZ(2,"ion-label"),t._uU(3),t.qZA(),t.TgZ(4,"ion-button",11),t._UZ(5,"ion-icon",12),t.qZA()()}if(2&a){const n=u.$implicit;t.xp6(3),t.hij(" ",n.title," "),t.xp6(1),t.MGl("routerLink","/test/details/",n.id,"")}}const O=[{path:"",component:(()=>{class a{constructor(n,l,p,C,b,S,L,U){this.activatedRoute=n,this.catalogService=l,this.modalCtrl=p,this.router=C,this.dataService=b,this.platform=S,this.toastCtrl=L,this.alertCtrl=U,this.isNewTestModalOpen=!1,this.testsSelected=new Array,this.notifierSubscription=this.dataService.catalogListNotifier.subscribe(N=>{this.catalogService.getCatalog(this.id).subscribe(E=>{this.catalog=E,console.log(E)})}),this.catalog=new h.g,this.modalAnimations=v.L.getModalAnimation()}ngOnInit(){this.id=this.activatedRoute.snapshot.params.id,this.catalogService.getCatalog(this.id).subscribe(n=>{this.catalog=n,console.log(n)})}ngOnDestroy(){this.modalCtrl.dismiss()}update(){this.catalogService.updateCatalog(this.id,this.catalog).subscribe(n=>{this.router.navigate(["catalog/list"])})}selectMultiple(n){let l=this.testsSelected.indexOf(n);-1!==l?this.testsSelected.splice(l,1):this.testsSelected.push(n),console.log(this.testsSelected)}deleteFromCatalog(){if(this.testsSelected.length>0){for(let n=0;n<this.testsSelected.length;n++)for(let l=0;l<this.catalog.tests.length;l++)this.catalog.tests[l].id===this.testsSelected[n].id&&this.catalog.tests.splice(l,1);this.catalogService.updateCatalog(this.catalog.id,this.catalog).subscribe(n=>{this.dataService.notifyAboutCatalogChange(),this.showSuccessNotificationExclusion()},n=>{console.log(n),this.showFailureNotification()}),this.testsSelected=new Array}}showSuccessNotificationExclusion(){var n=this;return(0,m.Z)(function*(){n.platform.is("android")?(yield n.toastCtrl.create({header:"Exclusion",message:"Les tests s\xe9lectionn\xe9s ont bien \xe9t\xe9 exclus de ce catalogue.",duration:3e3})).present():(yield n.alertCtrl.create({header:"Exclusion",message:"Les tests s\xe9lectionn\xe9s ont bien \xe9t\xe9 exclus de ce catalogue.",buttons:["OK"]})).present()})()}showFailureNotification(){var n=this;return(0,m.Z)(function*(){(yield n.alertCtrl.create({header:"Une erreur est survenue sur le serveur",message:"Veuillez r\xe9essayer plus tard",buttons:["OK"]})).present()})()}showConfirmAlert(){this.testsSelected.length>0&&this.alertCtrl.create({header:"!! Exclusion !!",message:"Voulez-vous vraiment exclure les tests s\xe9lectionn\xe9s?",buttons:[{text:"Confirmer",handler:()=>{this.deleteFromCatalog()}},{text:"Annuler"}]}).then(n=>{n.present()})}openTestImportModal(){var n=this;return(0,m.Z)(function*(){yield(yield n.modalCtrl.create({component:f.U,cssClass:["namastest-modal","namastest-list-modal"],enterAnimation:n.modalAnimations.enterAnimation,leaveAnimation:n.modalAnimations.leaveAnimation,componentProps:{catalog:n.catalog}})).present()})()}openTestModal(){var n=this;return(0,m.Z)(function*(){yield(yield n.modalCtrl.create({component:T.a,cssClass:["namastest-modal","namastest-center-modal"],enterAnimation:n.modalAnimations.enterAnimation,leaveAnimation:n.modalAnimations.leaveAnimation,componentProps:{catalog:n.catalog}})).present()})()}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(d.gz),t.Y36(r.a),t.Y36(o.IN),t.Y36(d.F0),t.Y36(g.D),t.Y36(o.t4),t.Y36(o.yF),t.Y36(o.Br))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-detail"]],decls:31,vars:3,consts:[["placeholder","Titre",3,"ngModel","ngModelChange"],["placeholder","Description",3,"ngModel","ngModelChange"],["id","click-trigger","color","success","size","small","expand","block","routerLink","/catalog/list",3,"click"],["routerLink","/catalog/list","expand","block"],["name","arrow-undo-outline"],["trigger","click-trigger","triggerAction","click"],["color","secondary",3,"click"],[3,"click"],["color","danger",3,"click"],[4,"ngFor","ngForOf"],[1,"ion-padding"],["slot","end",1,"eye",3,"routerLink"],["name","eye"]],template:function(n,l){1&n&&(t.TgZ(0,"ion-content")(1,"div")(2,"h1"),t._uU(3,"D\xe9tail du catalogue"),t.qZA(),t.TgZ(4,"ion-card")(5,"ion-card-header")(6,"ion-card-title")(7,"ion-input",0),t.NdJ("ngModelChange",function(C){return l.catalog.title=C}),t.qZA()(),t.TgZ(8,"ion-card-subtitle")(9,"ion-textarea",1),t.NdJ("ngModelChange",function(C){return l.catalog.description=C}),t.qZA()()(),t._UZ(10,"ion-card-content"),t.qZA(),t.TgZ(11,"ion-button",2),t.NdJ("click",function(){return l.update()}),t._uU(12," M\xe9ttre \xe0 jour "),t.qZA(),t.TgZ(13,"ion-button",3),t._UZ(14,"ion-icon",4),t._uU(15," Catalogues de tests "),t.TgZ(16,"ion-popover",5),t.YNc(17,i,2,0,"ng-template"),t.qZA()(),t.TgZ(18,"ion-button",6),t.NdJ("click",function(){return l.openTestImportModal()}),t.TgZ(19,"ion-title"),t._uU(20,"Importer des tests"),t.qZA()(),t.TgZ(21,"ion-button",7),t.NdJ("click",function(){return l.openTestModal()}),t.TgZ(22,"ion-title"),t._uU(23,"Cr\xe9er un test"),t.qZA()(),t.TgZ(24,"ion-button",8),t.NdJ("click",function(){return l.showConfirmAlert()}),t.TgZ(25,"ion-title"),t._uU(26,"Exclure tests"),t.qZA()(),t._UZ(27,"br"),t.TgZ(28,"h2"),t._uU(29,"Tests:"),t.qZA(),t.YNc(30,c,6,2,"ion-item",9),t.qZA()()),2&n&&(t.xp6(7),t.Q6J("ngModel",l.catalog.title),t.xp6(2),t.Q6J("ngModel",l.catalog.description),t.xp6(21),t.Q6J("ngForOf",l.catalog.tests))},dependencies:[_.sg,e.JJ,e.On,o.YG,o.PM,o.FN,o.Zi,o.tO,o.Dq,o.nz,o.W2,o.gu,o.pK,o.Ie,o.Q$,o.d8,o.g2,o.wd,o.w,o.j9,o.YI,d.rH],styles:["ion-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-bottom:20px}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{size:large}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-around}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{flex:1}@media screen and (min-width: 768px){ion-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{width:65%;max-width:800px;margin:5em auto;border-radius:.5em;padding:10px 30px;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}ion-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child   h1[_ngcontent-%COMP%]{text-align:center}}ion-popover[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: rgba(60, 169, 20, .864);--color: white}"]}),a})()},{path:"tests-list-modal",loadChildren:()=>Promise.resolve().then(s.bind(s,2678)).then(a=>a.TestsListModalPageModule)}];let Z=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[d.Bz.forChild(O),d.Bz]}),a})();var A=s(5071),x=s(2678);let y=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[_.ez,e.u5,o.Pc,Z,A.CreatePageModule,x.TestsListModalPageModule]}),a})()},2678:(D,M,s)=>{s.r(M),s.d(M,{TestsListModalPageModule:()=>v});var _=s(6895),e=s(4719),o=s(4123),d=s(5012),m=s(1902),h=s(6738);const T=[{path:"",component:m.U}];let f=(()=>{class t{}return t.\u0275fac=function(g){return new(g||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[d.Bz.forChild(T),d.Bz]}),t})(),v=(()=>{class t{}return t.\u0275fac=function(g){return new(g||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[_.ez,e.u5,o.Pc,f]}),t})()},1902:(D,M,s)=>{s.d(M,{U:()=>t});var _=s(5861),e=s(6738),o=s(4123),d=s(4911),m=s(3071),h=s(2468),T=s(6895),f=s(4719);function v(r,g){if(1&r){const i=e.EpF();e.TgZ(0,"ion-item")(1,"ion-checkbox",7),e.NdJ("click",function(){const O=e.CHM(i).$implicit,Z=e.oxw();return e.KtG(Z.selectMultiple(O))}),e.qZA(),e.TgZ(2,"ion-label"),e._uU(3),e.qZA()()}if(2&r){const i=g.$implicit;e.xp6(3),e.hij(" ",i.title," ")}}let t=(()=>{class r{constructor(i,c,P,O,Z,A,x,y){this.navParams=i,this.catalogService=c,this.userService=P,this.toastCtrl=O,this.alertCtrl=Z,this.platform=A,this.dataService=x,this.modalCtrl=y,this.userTests=new Array,this.testsSelected=new Array,this.catalog=i.get("value")}ngOnInit(){this.userService.getUser(this.catalog.author.id).subscribe(i=>{this.userTests=i.tests})}selectMultiple(i){let c=this.testsSelected.indexOf(i);-1!==c?this.testsSelected.splice(c,1):this.testsSelected.push(i),console.log(this.testsSelected)}importTests(){this.testsSelected.forEach(i=>{this.catalog.tests.push(i)}),this.catalogService.updateCatalog(this.catalog.id,this.catalog).subscribe(i=>{this.showSuccessNotificationImport(),this.dataService.notifyAboutCatalogChange(),this.modalCtrl.dismiss()},i=>{this.showFailureNotification(),this.modalCtrl.dismiss()})}showSuccessNotificationImport(){var i=this;return(0,_.Z)(function*(){i.platform.is("android")?(yield i.toastCtrl.create({header:"Importer des tests",message:"Les tests s\xe9lectionn\xe9s ont bien \xe9t\xe9 ajout\xe9s au catalogue.",duration:3e3})).present():(yield i.alertCtrl.create({header:"Importer des tests",message:"Les tests s\xe9lectionn\xe9s ont bien \xe9t\xe9 import\xe9s au catalogue.",buttons:["OK"]})).present()})()}showFailureNotification(){var i=this;return(0,_.Z)(function*(){(yield i.alertCtrl.create({header:"Une erreur est survenue sur le serveur",message:"Veuillez r\xe9essayer plus tard",buttons:["OK"]})).present()})()}dismissModal(){this.modalCtrl.dismiss()}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(o.X1),e.Y36(d.a),e.Y36(m.K),e.Y36(o.yF),e.Y36(o.Br),e.Y36(o.t4),e.Y36(h.D),e.Y36(o.IN))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-tests-list-modal"]],inputs:{catalog:"catalog"},decls:18,vars:1,consts:[[1,"close-button",3,"click"],["name","close-outline"],[4,"ngFor","ngForOf"],["type","submit","color","primary","size","medium","expand","block",3,"click"],["name","checkbox-outline"],["color","light","size","medium","expand","block",3,"click"],["name","exit-outline"],[3,"click"]],template:function(i,c){1&i&&(e.TgZ(0,"ion-header")(1,"button",0),e.NdJ("click",function(){return c.dismissModal()}),e._UZ(2,"ion-icon",1),e.qZA(),e.TgZ(3,"h1"),e._uU(4,"Vos tests"),e.qZA()(),e.TgZ(5,"ion-content")(6,"form"),e.YNc(7,v,4,1,"ion-item",2),e.TgZ(8,"ion-button",3),e.NdJ("click",function(){return c.importTests()}),e.TgZ(9,"span")(10,"span"),e._uU(11,"importer"),e.qZA(),e._UZ(12,"ion-icon",4),e.qZA()(),e.TgZ(13,"ion-button",5),e.NdJ("click",function(){return c.dismissModal()}),e.TgZ(14,"span")(15,"span"),e._uU(16,"Retour"),e.qZA(),e._UZ(17,"ion-icon",6),e.qZA()()()()),2&i&&(e.xp6(7),e.Q6J("ngForOf",c.userTests))},dependencies:[T.sg,f._Y,f.JL,f.F,o.YG,o.nz,o.W2,o.Gu,o.gu,o.Ie,o.Q$,o.w],styles:["ion-button[_ngcontent-%COMP%]{width:50%;margin:0 auto 1em}ion-button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-around}ion-button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{flex:1}form[_ngcontent-%COMP%]{width:90%;margin:0 auto;padding:1em}form[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{color:#000}form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--highlight-background: var(--ion-color-primary)}form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:last-of-type{margin-bottom:2em}"]}),r})()}}]);